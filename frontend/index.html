<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Winter Adda | Premium Winter Fashion</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description"
    content="Winter Adda - Premium winter jackets, hoodies, sweaters and thermal wear for stylish winters in India.">
  <link rel="stylesheet" href="styles.css">
  <!-- Meta Pixel Code -->
  <script>
    !function (f, b, e, v, n, t, s) {
      if (f.fbq) return; n = f.fbq = function () {
        n.callMethod ?
          n.callMethod.apply(n, arguments) : n.queue.push(arguments)
      };
      if (!f._fbq) f._fbq = n; n.push = n; n.loaded = !0; n.version = '2.0';
      n.queue = []; t = b.createElement(e); t.async = !0;
      t.src = v; s = b.getElementsByTagName(e)[0];
      s.parentNode.insertBefore(t, s)
    }(window, document, 'script',
      'https://connect.facebook.net/en_US/fbevents.js');
    fbq('init', '1357237699215052');
    fbq('track', 'PageView');
  </script>
  <noscript><img height="1" width="1" style="display:none"
      src="https://www.facebook.com/tr?id=1357237699215052&ev=PageView&noscript=1" /></noscript>
  <!-- End Meta Pixel Code -->
</head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-LJQ91G8QES"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() { dataLayer.push(arguments); }
  gtag('js', new Date());

  gtag('config', 'G-LJQ91G8QES');
</script>

<body>
  <header>
    <div class="logo-area">
      <img src="images/logo.png" alt="Winter Adda Logo">
      <span>Winter Adda</span>
    </div>
    <nav>
      <a href="index.html" class="active">Home</a>
      <a href="products.html">Products</a>
      <a href="about.html">About</a>
      <a href="contact.html">Contact</a>
      <a href="cart.html">Cart</a>
    </nav>
  </header>

  <section class="hero">
    <div class="hero-slider">
      <img src="images/slide_1.png" class="slide active">
      <!--<img src="images/slide_2.png" class="slide">-->
      <!--<img src="images/slide_3.png" class="slide">-->
    </div>

    <div class="hero-content">
      <h1>Stay Warm<br>Stay Stylish</h1>
      <p>Winter Adda is your cosy corner for premium winter fashion ‚Äì jackets, hoodies, sweaters and more, curated for
        Indian winters.</p>
      <a href="products.html" class="btn">Shop Winter Collection</a>
    </div>
  </section>
  <section class="shop-category">
    <h2 class="section-title">Shop by Category</h2>
    <p class="section-subtitle">Find your perfect winter wear in one click.</p>

    <div class="category-buttons">

      <a href="products.html?category=jackets" class="cat-btn">
        Jackets
      </a>

      <a href="products.html?category=hoodies" class="cat-btn">
        Hoodies
      </a>

      <a href="products.html?category=sweaters" class="cat-btn">
        Sweaters
      </a>

      <a href="products.html?category=thermals" class="cat-btn">
        Thermals
      </a>

      <a href="products.html?category=accessories" class="cat-btn">
        Accessories
      </a>

      <a href="products.html?category=boots" class="cat-btn">
        Winter Boots
      </a>

    </div>
  </section>

  <!-- Trending Women's Collection -->
  <div class="container">
    <h2 class="section-title">Trending This Season</h2>
    <p class="section-subtitle">Handpicked styles loved by customers across India.</p>

    <div class="products-grid" id="featured-products-grid">
      <!-- Dynamic Featured Products will load here -->
      <p style="text-align:center; width:100%; grid-column: 1/-1;">Loading featured collection...</p>
    </div>
  </div>

  <!-- Featured Men's Collection -->
  <div class="container">
    <h2 class="section-title">Men's Winter Essentials</h2>
    <p class="section-subtitle">Warm, rugged and stylish winter essentials for men.</p>

    <div class="products-grid" id="men-essentials-grid">
      <!-- Dynamic Men's Essentials can also load here or be merged -->
    </div>
  </div>

  <!-- Why Choose Us Section -->
  <div class="container why-choose">
    <h2 class="section-title">Why Choose Winter Adda?</h2>

    <div class="features-grid">

      <div class="feature-card">
        <span class="feature-icon">üöö</span>
        <h4>Free Shipping</h4>
        <p>Free delivery on orders above ‚Çπ5,000</p>
      </div>

      <div class="feature-card">
        <span class="feature-icon">‚Ü©Ô∏è</span>
        <h4>Easy Returns</h4>
        <p>7-day hassle-free return policy</p>
      </div>

      <div class="feature-card">
        <span class="feature-icon">‚ú®</span>
        <h4>Premium Quality</h4>
        <p>Handpicked fabrics for ultimate comfort</p>
      </div>

      <div class="feature-card">
        <span class="feature-icon">üí≥</span>
        <h4>Secure Payment</h4>
        <p>100% secure payment gateway</p>
      </div>

    </div>
  </div>


  <footer>
    ¬© 2025 Winter Adda. All rights reserved.
  </footer>

  <script src="script.js"></script>
  <script src="auth.js"></script>
  <script>
    // Hero Slider
    let slides = document.querySelectorAll('.slide');
    let index = 0;

    if (slides.length > 1) {
      setInterval(() => {
        slides[index].classList.remove('active');
        index = (index + 1) % slides.length;
        slides[index].classList.add('active');
      }, 4000);
    }

    // Dynamic Featured Products
    async function loadFeaturedProducts() {
      const grid = document.getElementById('featured-products-grid');
      try {
        const res = await fetch(`${API_URL.replace('/auth', '/products')}?isFeatured=true`);
        const products = await res.json();

        // Helper to resolve image URL
        function getImageUrl(path) {
          if (!path) return 'images/logo.png';
          if (path.startsWith('http')) return path;
          // For transition: handle old local uploads paths if they exist
          if (path.startsWith('uploads/')) {
            const baseUrl = API_URL.replace('/api/auth', '');
            return `${baseUrl}/${path.replace(/\\/g, '/')}`;
          }
          return path;
        }

        if (products.length === 0) {
          grid.innerHTML = '<p style="text-align:center; width:100%; grid-column: 1/-1;">Check back soon for our new featured collection!</p>';
          return;
        }

        grid.innerHTML = products.map(p => `
          <div class="product-card">
            <img src="${getImageUrl(p.image)}" alt="${p.name}" onerror="this.src='images/logo.png'">
            <h3>${p.name}</h3>
            <p class="price">‚Çπ${p.price}</p>
            <p>${p.description || ''}</p>
            <button class="btn" onclick="addToCart('${p.name.replace(/'/g, "\\'")}', ${p.price}, '${getImageUrl(p.image).replaceAll('\\', '/')}')">Add to Cart</button>
          </div>
        `).join('');
      } catch (err) {
        console.error('Error loading featured products:', err);
        grid.innerHTML = '<p style="text-align:center; width:100%; grid-column: 1/-1;">Welcome to Winter Adda! Our collection is coming soon.</p>';
      }
    }

    document.addEventListener('DOMContentLoaded', loadFeaturedProducts);

  </script>
</body>

</html>